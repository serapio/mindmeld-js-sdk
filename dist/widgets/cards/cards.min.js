!function(t,e,n){var a,o,i,r={},c=function(n,a){if(c.tmplCache||(c.tmplCache={}),!c.tmplCache[n]){var o;e.ajax({url:n,method:"GET",async:!1,success:function(t){o=t}}),c.tmplCache[n]=t.compile(o)}return c.tmplCache[n](a)},l=function(t,n){var a=e(r.cardSelector);a.length<=n?e(r.parentSelector).append(t):t.insertBefore(a[n])},d=function(t,n,i){var c,l,d=e(r.parentSelector).width(),s=t.outerWidth(!0),u=t.outerHeight(!0);i[t[0].id]={height:u,width:s};var p=Math.max(1,Math.floor(d/s));if(a=p*s,o=s,s>d)c=0,l=n*u;else if(c=n%p*s,l=0,n>=p)for(var f=e(r.cardSelector),h=n%p;n>h;h+=p)l+=i[f[h].id].height;return{top:l,left:c}},s=function(t,e,n){var a=50;t.css("z-index",a-e);var o=d(t,e,n);t.attr("new")?(t.attr("new",null),t.css("left",o.left+"px"),t.css("top",o.top+"px"),t.transition({opacity:1},r.animationDuration)):t.transition({left:o.left,top:o.top},r.animationDuration)},u={initialize:function(t){r=t,"animationDuration"in r||(r.animationDuration=500),e(window).resize(function(){(e(r.parentSelector).width()<a||e(r.parentSelector).width()>=a+o)&&u.layoutCards()})},setCards:function(t,n){console.log("Appending cards",t),t.forEach(function(t,a){var o=e("#"+t.documentid);o.length?l(o,a):(o=e(c(r.templatePath,t)),o.css("opacity",0),o.attr("new",!0),o.on("click",{card:t},function(t){return e(r.cardSelector).removeClass("selected"),o.addClass("selected"),n(t)}),l(o,a),o.imagesLoaded(function(){o.find(".not-loaded").removeClass("not-loaded")}))});for(var a=e(r.cardSelector),o=t.length;o<a.length;o++)e(a[o]).transition({opacity:0},r.animationDuration,function(){e(this).remove()});u.layoutCards(),e(r.cardSelector).imagesLoaded(function(){u.layoutCards()})},layoutCards:function(){var t={};e(r.cardSelector).each(function(n,a){s(e(a),n,t)})},setLoading:function(t){e(r.parentSelector).toggleClass("loading",t),t?i?i.spin(e(r.parentSelector)[0]):n&&(i=new n({length:60,width:15,top:"200px"}).spin(e(r.parentSelector)[0])):i&&i.stop()}};window.MindMeldCards=u}(Handlebars,jQuery,Spinner);
//# sourceMappingURL=cards.js
//# sourceMappingURL=cards.min.js.map